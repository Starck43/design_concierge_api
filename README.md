# designer concierge
Чат бот телеграм для дизайнеров

## Хранилище данных в телеграм (context)

### user_data:
    Контекст персональных данных пользователя, загружаемый при необходимости с сервера

### chat_data:
    Контекст данных, имеющий отношение к чату, 
    включая его статус, состояние диалога, сообщения, клавиатура, геопозиция и др.

- `cats`
список всех категорий со всеми связанными пользователями (в дальнейшем надо предусмотреть еще разбиение на регионы)


- `cat_users`
словарь, хранящий запрошенные списки пользователей в категории. Ключ объекта - это id категории


- `suppliers`
словарь, хранящий запрошенные данные о поставщиках. Ключ объекта - это id пользователя


- `selected_cat`
объект с данными для текущей категории {id, name, group}


- `selected_user`
объект с данными о текущем пользователе {id, username, groups, total_rate и др}


- `rating_questions`
Список вопросов для группы объектов 1 и 2
```json5
[
    {
        "deadlines": "Соблюдение сроков",
        "sales_service_quality": "Качество сервиса при продаже товаров/услуг"
    },
    {
        "quality": "Качество продукции",
        "deadlines": "Соблюдение сроков",
        "sales_service_quality": "Качество сервиса при продаже товаров/услуг",
        "service_delivery_quality": "Качество сервиса при установке/выполнении работ",
        "designer_program_quality": "Программа работы с дизайнерами",
        "location": "Месторасположение"
    },
]
```

- `user_field_names`
Словарь названий полей модели User для изменения в профиле пользователя
```json5
{
    "username": "Имя пользователя",
    "name": "Полное название",
    "access": "Вид доступа",
    "description": "Описание",
    "business_start_year": "Год начала деятельности",
    "main_region": "Основной регион",
    "segment": "Сегмент рынка",
    "address": "Адрес",
    "phone": "Контактный телефон",
    "email": "Электронная почта",
    "socials_url": "Ссылка на соцсеть",
    "site_url": "Ссылка на сайт",
    "categories": "Виды деятельности",
    "regions": "Дополнительные регионы"
}
```

- `saved_message`
    Сохраненное сообщение с инлайн клавиатурой, которое будет показано после возврата на верхний уровень меню. \
    _Удалится после отображения (см. функцию go_back)_


- `saved_details_message`
    Сохраненное сообщение с инлайн клавиатурой с целью обновления измененных данных 


- `last_message_id`
    ID последнего сохраненного сообщения с инлайн клавиатурой для возможности замены сообщения на новое


- `last_message_ids`
    Список ID сохраненных сообщений, которые требуется удалить при возврате на верхний уровень меню

### bot_data:
    Контекст общедоступных данных для всех пользователей бота
- `rate_questions`
список вопросов для выставления рейтинга для двух групп поставщиков: аутсорсеры и поставщики
```json5
[
    {
        "deadlines": "Соблюдение сроков",
        "sales_service_quality": "Качество сервиса при продаже товаров/услуг"
    },
    {
        "quality": "Качество продукции",
        "deadlines": "Соблюдение сроков",
        "sales_service_quality": "Качество сервиса при продаже товаров/услуг",
        "service_delivery_quality": "Качество сервиса при установке/выполнении работ",
        "designer_program_quality": "Работа с дизайнерами",
        "location": "Удобство расположения"
    }
]
```
- `user_field_names`
список полей данных пользователя для трех групп: _дизайнеры, аутсорсеры, поставщики_
```json5
[
	["username", "categories", "main_region", "socials_url", "regions", ],
	["username", "categories", "main_region", "regions", "description", "address", "socials_url", "site_url"],
	["username", "name", "segment", "categories", "main_region", "regions", "description", "address", "socials_url", "site_url"],
]
```


## Additional
examples: https://github.com/ohld/django-telegram-bot
